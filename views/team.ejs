<%- include header %>
<%- include nav2 %>
<%- include to_Top %>
<div class="row mb-2" style="margin-top: 25px;">
		<div class="col-md-12">
			<div class="card flex-md-row mb-4 box-shadow">
				<div class="card-body d-flex flex-column align-items-start">
					<div class="col-12">	
						<div class="col-md-12">
							<div class="col-12">
								<div class="teamList"><%= teams.name %></div><br>
								<p><div class="title_txt">團隊成果共享：</div><br></p>
								<div id="map"></div>
								<div class="txt_family">
								<div class="leader_txt">領隊人：<%= teams.leader %></div><br>
								<div class="team_txt">
								<p><div class="title_txt">團隊服務宗旨：</div><br><%- include two_blank %><%-teams.purpose %></p>
								<br>
								<span><div class="title_txt">團隊介紹：</div><br><%- include two_blank %><%- teams.introduction %></span><br />
								<br>
								<span><div class="title_txt">團隊專業介紹：</div><br><%- include two_blank %> <%- teams.pro_introduction %></span><br />
								
								<div class="title_txt"><span>團隊聯絡方式： </span></div><br />
								<span>團隊網站：<a href="http://<%= teams.website %>">點我</a></span><br />
								<span>聯絡人：<%= teams.connection.name %></span><br />
								<span>聯絡人電話：0<%= teams.connection.phone %></span><br />
								<span>聯絡人信箱：<a href="mailto:<%= teams.connection.email %>"><%= teams.connection.email %></a></span><br />
								<span>點擊數：<%= teams.pv %></span>
								</div>
								</div>
								<% if(teams.teamImg) {%>
								<div class="card flex-md-row mb-4 box-shadow">
									<div class="card-body flex-column align-items-start padding5">
										<a href="<%= teams.teamImg %>"><img height="100%" src="<%= teams.teamImg %>" width="100%"></a>
									</div>
								</div>
								<% } %>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
</div>
<script>
  var map;
  var result = <%- achievement %>
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 23.7031129, lng: 120.4279623},
      zoom: 9
    });

    

    result.forEach((doc, i) => {
	    var uluru = {lat: doc.ACT_LOCATION.LOCATION_LAT, lng: doc.ACT_LOCATION.LOCATION_LNG};
    	var marker = new google.maps.Marker({position: uluru, map: map, animation: google.maps.Animation.DROP});
    	var contentString = '<div id="content">'+
	        '<div id="siteNotice">'+
	        '</div>'+
	        '<h3 id="firstHeading" class="firstHeading"><a href="achievement/' + result[i]._id + '">' +
	         result[i].ACT_NAME + '</a></h3></div>';

    	var infowindow = new google.maps.InfoWindow({
          content: contentString
        });

    	marker.addListener('click', function() {
	      infowindow.open(map, marker);
	    });
    });
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA6MrbT0cNZgeYP3JUP4R2U-WZDbWVzWM8&callback=initMap"
	async defer></script>
<style>
	#map {
    	height: 300px;
    }
</style>
<%- include footer %>